{
  "version": 3,
  "sources": ["../src/index.tsx"],
  "sourcesContent": ["import React from \"react\";\nimport { useStore } from \"./store\";\n\nimport { Item } from \"./types\";\nimport { MiniMap } from \"./components/MiniMap\";\nimport { SelectedPanel } from \"./components/SelectedPanel\";\nimport { RectsRenderer } from \"./components/RectsRenderer\";\n\nimport { utils_buildStructure, utils_deriveRects } from \"./utils\";\nimport { LenzRefs } from \"./components/LenzRefs\";\nimport { Breadcrumbs } from \"./components/Breadcrumbs\";\n\nimport { KeyBinding } from \"./components/KeyBinding\";\n\nexport type Props = {\n  Comp?: React.ComponentType<{\n    item: Item;\n  }>;\n  show: boolean;\n  showMiniMap?: boolean;\n  onCloseClicked?: () => void;\n  onKeypress?: (e: KeyboardEvent) => void;\n};\n\nexport const Lenz = (props: Props) => {\n  const store = useStore();\n  const state = store.get();\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      const state = store.get();\n      if (!props.show) return;\n      const el = document.body;\n      store.set({\n        structure: utils_buildStructure(el),\n        derived: utils_deriveRects(state.structure),\n      });\n    }, 200);\n    const onScroll = () => {\n      store.set({ scrolling: Date.now() });\n    };\n    window.addEventListener(\"scroll\", onScroll);\n    document.body.addEventListener(\"scroll\", onScroll);\n\n    return () => {\n      clearInterval(interval);\n      window.removeEventListener(\"scroll\", onScroll);\n      document.body.addEventListener(\"scroll\", onScroll);\n    };\n  }, [props.show]);\n\n  if (typeof document === \"undefined\") return <></>;\n\n  return (\n    <>\n      <KeyBinding onKeypress={props.onKeypress || (() => {})} />\n      <>\n        {props.show && (\n          <div\n            id=\"lenz-content\"\n            style={{\n              zIndex: 2147483647,\n              left: 0,\n              position: \"fixed\",\n              width: \"100%\",\n              height: \"100%\",\n            }}\n          >\n            <div\n              style={{\n                position: \"relative\",\n                width: \"100%\",\n                height: \"100%\",\n              }}\n            >\n              {state.scrolling + 100 < Date.now() && <RectsRenderer />}\n              {state.selections.selected && <SelectedPanel Comp={props.Comp} />}\n              {props.showMiniMap && (\n                <div\n                  style={{\n                    position: \"absolute\",\n                    bottom: 0,\n                    right: 0,\n                    zIndex: 999999999,\n                  }}\n                >\n                  <MiniMap />\n                </div>\n              )}\n            </div>\n            <div\n              style={{\n                position: \"absolute\",\n                top: 0,\n                right: 0,\n                borderRadius: \"0px 0px 0px 5px\",\n                overflow: \"hidden\",\n              }}\n            >\n              <LenzRefs onCloseClick={props.onCloseClicked || (() => {})} />\n            </div>\n            {state.selections.primary && (\n              <div\n                style={{\n                  position: \"absolute\",\n                  top: 0,\n                  left: 0,\n                  borderRadius: \"0px 0px 5px 0px\",\n                  overflow: \"hidden\",\n                }}\n              >\n                <Breadcrumbs />\n              </div>\n            )}\n          </div>\n        )}\n      </>\n    </>\n  );\n};\n"],
  "mappings": "AAmD8C,wBAiBlC,YAjBkC;AAnD9C,OAAO,WAAW;AAClB,SAAS,gBAAgB;AAGzB,SAAS,eAAe;AACxB,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAE9B,SAAS,sBAAsB,yBAAyB;AACxD,SAAS,gBAAgB;AACzB,SAAS,mBAAmB;AAE5B,SAAS,kBAAkB;AAYpB,MAAM,OAAO,CAAC,UAAiB;AACpC,QAAM,QAAQ,SAAS;AACvB,QAAM,QAAQ,MAAM,IAAI;AAExB,QAAM,UAAU,MAAM;AACpB,UAAM,WAAW,YAAY,MAAM;AACjC,YAAMA,SAAQ,MAAM,IAAI;AACxB,UAAI,CAAC,MAAM,KAAM;AACjB,YAAM,KAAK,SAAS;AACpB,YAAM,IAAI;AAAA,QACR,WAAW,qBAAqB,EAAE;AAAA,QAClC,SAAS,kBAAkBA,OAAM,SAAS;AAAA,MAC5C,CAAC;AAAA,IACH,GAAG,GAAG;AACN,UAAM,WAAW,MAAM;AACrB,YAAM,IAAI,EAAE,WAAW,KAAK,IAAI,EAAE,CAAC;AAAA,IACrC;AACA,WAAO,iBAAiB,UAAU,QAAQ;AAC1C,aAAS,KAAK,iBAAiB,UAAU,QAAQ;AAEjD,WAAO,MAAM;AACX,oBAAc,QAAQ;AACtB,aAAO,oBAAoB,UAAU,QAAQ;AAC7C,eAAS,KAAK,iBAAiB,UAAU,QAAQ;AAAA,IACnD;AAAA,EACF,GAAG,CAAC,MAAM,IAAI,CAAC;AAEf,MAAI,OAAO,aAAa,YAAa,QAAO,gCAAE;AAE9C,SACE,iCACE;AAAA,wBAAC,cAAW,YAAY,MAAM,eAAe,MAAM;AAAA,IAAC,IAAI;AAAA,IACxD,gCACG,gBAAM,QACL;AAAA,MAAC;AAAA;AAAA,QACC,IAAG;AAAA,QACH,OAAO;AAAA,UACL,QAAQ;AAAA,UACR,MAAM;AAAA,UACN,UAAU;AAAA,UACV,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QAEA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,gBACL,UAAU;AAAA,gBACV,OAAO;AAAA,gBACP,QAAQ;AAAA,cACV;AAAA,cAEC;AAAA,sBAAM,YAAY,MAAM,KAAK,IAAI,KAAK,oBAAC,iBAAc;AAAA,gBACrD,MAAM,WAAW,YAAY,oBAAC,iBAAc,MAAM,MAAM,MAAM;AAAA,gBAC9D,MAAM,eACL;AAAA,kBAAC;AAAA;AAAA,oBACC,OAAO;AAAA,sBACL,UAAU;AAAA,sBACV,QAAQ;AAAA,sBACR,OAAO;AAAA,sBACP,QAAQ;AAAA,oBACV;AAAA,oBAEA,8BAAC,WAAQ;AAAA;AAAA,gBACX;AAAA;AAAA;AAAA,UAEJ;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,gBACL,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,cAAc;AAAA,gBACd,UAAU;AAAA,cACZ;AAAA,cAEA,8BAAC,YAAS,cAAc,MAAM,mBAAmB,MAAM;AAAA,cAAC,IAAI;AAAA;AAAA,UAC9D;AAAA,UACC,MAAM,WAAW,WAChB;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,gBACL,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,MAAM;AAAA,gBACN,cAAc;AAAA,gBACd,UAAU;AAAA,cACZ;AAAA,cAEA,8BAAC,eAAY;AAAA;AAAA,UACf;AAAA;AAAA;AAAA,IAEJ,GAEJ;AAAA,KACF;AAEJ;",
  "names": ["state"]
}
